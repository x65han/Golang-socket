<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Johnson Han</title>
        <link rel="shortcut icon" type="image/png" href="/fake/favicon.ico"/>
        <script src="/fake/script.js" type="text/javascript"></script>
        <script src="/fake/socket.io.js" type="text/javascript"></script>
    </head>
    <body {{template "bodyStyle.html"}}>
        <h1>Below shoe injected message:</h1>
        <div id='master-player'></div>
        <textarea id='message-box' autofocus></textarea>
        <br>
        <br>
        <button onclick='connectToRoom()' id='roomname'>Connect to room</button>
        <button onclick='sendMessage()' id='send'>Send Message</button>
        <button onclick='updateUsername()' id='username'>Update Username</button>
    </body>
</html>

<script>
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
  var playerControl = {
      videoId: "LGIcCaGvY2s",
      isReady: false
  };
  function onYouTubeIframeAPIReady() {
      new YT.Player('master-player', {
          height: '100%',
          width:  '100%',
          videoId: 'LGIcCaGvY2s',
          events: {
              'onReady': onPlayerReady,
              'onStateChange': onPlayerStateChange
          },
          playerVars:{
              modestbranding: 0,
              controls: 0,
              showinfo: 0,
              rel: 0
          }
      });
  }
  function onPlayerReady(e){playerControl.isReady = true;}
  function onPlayerStateChange(e) {
      if(e.data==YT.PlayerState.ENDED){
          e.target.playVideo();
      }
  }
</script>
